#!/bin/sh

if [[ ! -f "/opt/homebrew/anaconda3/bin/conda" ]]; then
  brew install --cask anaconda
fi

/opt/homebrew/anaconda3/bin/conda environment -n neovim
/opt/homebrew/anaconda3/bin/conda activate neovim

pip install neovim
sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'

echo """set runtimepath^=~/.vim runtimepath+=~/.vim/after
    let &packpath = &runtimepath
    source ~/.vimrc""" >>~/.config/nvim/init.vim

conda activate base

ln -f "$DOT_DIR"/home/plaintex.snippets "$HOME"/.config/coc/ultisnips/plaintex.snippets
